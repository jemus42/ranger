<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Case-specific random forests. — csrf • ranger</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Case-specific random forests. — csrf" />
<meta property="og:description" content="In case-specific random forests (CSRF), random forests are built specific to the cases of interest. 
Instead of using equal probabilities, the cases are weighted according to their difference to the case of interest." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ranger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.13.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/imbs-hl/ranger/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Case-specific random forests.</h1>
    <small class="dont-index">Source: <a href='https://github.com/imbs-hl/ranger/blob/master/R/csrf.R'><code>R/csrf.R</code></a></small>
    <div class="hidden name"><code>csrf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>In case-specific random forests (CSRF), random forests are built specific to the cases of interest. 
Instead of using equal probabilities, the cases are weighted according to their difference to the case of interest.</p>
    </div>

    <pre class="usage"><span class='fu'>csrf</span><span class='op'>(</span>
  <span class='va'>formula</span>,
  <span class='va'>training_data</span>,
  <span class='va'>test_data</span>,
  params1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  params2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>Object of class <code>formula</code> or <code>character</code> describing the model to fit.</p></td>
    </tr>
    <tr>
      <th>training_data</th>
      <td><p>Training data of class <code>data.frame</code>.</p></td>
    </tr>
    <tr>
      <th>test_data</th>
      <td><p>Test data of class <code>data.frame</code>.</p></td>
    </tr>
    <tr>
      <th>params1</th>
      <td><p>Parameters for the proximity random forest grown in the first step.</p></td>
    </tr>
    <tr>
      <th>params2</th>
      <td><p>Parameters for the prediction random forests grown in the second step.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical indicating whether or not to print computation progress.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Predictions for the test dataset.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The algorithm consists of 3 steps:</p><ol>
<li><p>Grow a random forest on the training data</p></li>
<li><p>For each observation of interest (test data), the weights of all training observations are computed by counting the number of trees in which both observations are in the same terminal node.</p></li>
<li><p>For each test observation, grow a weighted random forest on the training data, using the weights obtained in step 2. Predict the outcome of the test observation as usual.</p></li>
</ol><p>In total, n+1 random forests are grown, where n is the number observations in the test dataset.
 For details, see Xu et al. (2014).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Xu, R., Nettleton, D. &amp; Nordman, D.J. (2014). Case-specific random forests. J Comp Graph Stat 25:49-65. doi: <a href='https://doi.org/10.1080/10618600.2014.983641'>10.1080/10618600.2014.983641</a>
.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Marvin N. Wright</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'>## Split in training and test data</span></span>
<span class='r-in'><span class='va'>train.idx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span>, <span class='fl'>2</span><span class='op'>/</span><span class='fl'>3</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>iris.train</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>[</span><span class='va'>train.idx</span>, <span class='op'>]</span></span>
<span class='r-in'><span class='va'>iris.test</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>[</span><span class='op'>-</span><span class='va'>train.idx</span>, <span class='op'>]</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Run case-specific RF</span></span>
<span class='r-in'><span class='fu'>csrf</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span> <span class='va'>.</span>, training_data <span class='op'>=</span> <span class='va'>iris.train</span>, test_data <span class='op'>=</span> <span class='va'>iris.test</span>, </span>
<span class='r-in'>     params1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>num.trees <span class='op'>=</span> <span class='fl'>50</span>, mtry <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>, </span>
<span class='r-in'>     params2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>num.trees <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [1] setosa     setosa     setosa     setosa     setosa     setosa    </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [7] setosa     setosa     setosa     setosa     setosa     virginica </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [13] versicolor versicolor versicolor versicolor versicolor virginica </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [19] versicolor versicolor versicolor virginica  versicolor versicolor</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [25] versicolor versicolor versicolor versicolor virginica  versicolor</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [31] versicolor virginica  virginica  virginica  virginica  virginica </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [37] virginica  virginica  versicolor virginica  virginica  virginica </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [43] versicolor virginica  virginica  virginica  virginica  virginica </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [49] virginica  virginica </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Levels: setosa versicolor virginica</span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://wrig.de'>Marvin N. Wright</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


